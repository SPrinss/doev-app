<link rel="import" href="doev-element.html">
<link rel="import" href="celebration-avatar.html">
<link rel="import" href="slide-visual.html">

<dom-module id="celebration-slide">
  <template>
    <style>
      :host {
        display: block;
        --serif-base: {
          font-family: 'Georgia';
          font-weight: 400;
          text-rendering: optimizeLegibility;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
      };  
      * {
        box-sizing: border-box;
      }
      main {
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      img {
        width: 100%;
        margin: auto;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-drag: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        pointer-events: none;
        max-height: 50vh;
        height: 100%;
        object-fit: cover;
      }
      slide-visual {
        width: 100%;
      }
      article {
        @apply --serif-base;
      }      
      #message-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      article {
        white-space: pre-wrap;
        font-style: italic;
        font-size: 4vmin;
        line-height: 3vmin;
        /* line-height: 0.6; */
        /* font-size: 48px; */
        padding: 0;
        margin: 42px 0;
        text-align: center;        
      }

      @media screen and (max-width: 768px) {
        article {
          font-size: 22px;   
          line-height: 0.5;
          margin: 26px 0;
        }
      }

      article:before {
        content: '‘';
      }
      article:after {
        content: '’';
      }       
      celebration-avatar {
        min-height: 280px;
      } 
    </style>
    
    <main>
      <img hidden$="[[!imgUrl]]" src="[[imgUrl]]" alt="">

      <slide-visual 
        audio-url="[[audioUrl]]"
        video-url="[[videoUrl]]"
        media-playable="[[mediaPlayable]]"
        most-recent-user-media-state-is-play="{{mostRecentUserMediaStateIsPlay}}"
      ></slide-visual>

      <div id="message-container"><article>[[message]]</article></div>

      <celebration-avatar
        name="[[name]]"
        image-url="[[avatarUrl]]"
      ></celebration-avatar>
    </main>

  </template>
  <script>
    /**
     * @customElement
     * @polymer
     */
    class CelebrationSlide extends DoevElement {
      static get is() { return 'celebration-slide'; }
      static get properties() {
        return {
          audioUrl: {
            type: String,
            value: ""
          },
          videoUrl: {
            type: String,
            value: ""
          },
          mediaPlayable: {
            type: Boolean,
          },
          message: {
            type: String,
          },
          imgUrl: {
            type: String,
            value: ""
          },
          name: {
            type: String,
          },
          avatarUrl: {
            type: String,
          },          
          mostRecentUserMediaStateIsPlay: {
            type: Boolean,
          }

        };
      }
    }

    window.customElements.define(CelebrationSlide.is, CelebrationSlide);
  </script>
</dom-module>
